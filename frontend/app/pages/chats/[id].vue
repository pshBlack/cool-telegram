<template>
  <div class="flex h-screen">
    <Sidebar :chats="chats" />

    <!-- –ü—Ä–∞–≤–∞ –ø–∞–Ω–µ–ª—å (–ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Ç) -->
    <main class="flex-1 flex flex-col">
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <header class="p-4 border-b border-gray-300">
        <h2 class="text-lg font-bold">
          {{ currentChat?.name || "–ß–∞—Ç" }}
        </h2>
      </header>

      <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è -->
      <div class="flex-1 p-4 overflow-y-auto space-y-2">
        <div
          v-for="(msg, i) in messages"
          :key="i"
          class="p-2 rounded-lg max-w-xs"
          :class="
            msg.me ? 'bg-blue-500 text-white ml-auto' : 'bg-gray-200 text-black'
          "
        >
          {{ msg.text }}
        </div>
      </div>

      <!-- –Ü–Ω–ø—É—Ç -->
      <footer class="p-4 border-t border-gray-300 flex">
        <input
          v-model="newMessage"
          type="text"
          placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."
          class="flex-1 border rounded-lg px-3 py-2 mr-2"
          @keyup.enter="sendMessage"
        />
        <button
          @click="sendMessage"
          class="bg-blue-500 text-white px-4 py-2 rounded-lg"
        >
          –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏
        </button>
      </footer>
    </main>
  </div>
</template>

<script setup>
const route = useRoute();

let chats = [
  {
    id: 1,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 1,
  },
  {
    id: 2,
    name: "ool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 3,
    name: "l Jobless",
    lastMessage: "Please let me work...",
    unread: 3,
  },
  {
    id: 4,
    name: "aool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "bool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
  {
    id: 4,
    name: "Cool Jobless",
    lastMessage: "Please let me work...",
    unread: 0,
  },
];

const currentChat = chats.find((c) => c.id == route.params.id);

const messages = ref([
  { text: "–ü—Ä–∏–≤—ñ—Ç üëã", me: false },
  { text: "–Ø–∫ —Å–ø—Ä–∞–≤–∏?", me: false },
  { text: "–í—Å–µ –¥–æ–±—Ä–µ, –ø—Ä–∞—Ü—é—é –Ω–∞–¥ Nuxt üöÄ", me: true },
]);

const newMessage = ref("");

function sendMessage() {
  if (newMessage.value.trim() === "") return;
  messages.value.push({ text: newMessage.value, me: true });
  newMessage.value = "";
}
</script>
